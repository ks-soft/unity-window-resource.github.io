.. highlight:: csharp

.. _SpriteFont:

====================
フォントについて
====================

 最大ビットマップフォント４枚を一つのフォントとして扱えます。
 
 ただし、これら４枚のビットマップをアセット化する際に、ビットマップファイルのα成分のみを参照します。
 ４枚のα成分を一枚のテクスチャの(R,G,B,A)成分にそれぞれマッピングし保存します。

 ４枚を超えるテクスチャを一つのフォントデータとして扱うことができません。

.. note:
 
 正方形で指定し、幅、高さ共に2のべき乗を指定するようにしてください。
 また、最大2048以内に収めておくと互換性の問題が出ずらいです。


リソースデータとして作成
--------------------------------

 Assetsフォルダの下に、FontResourceというフォルダを作ります。
 
 そのフォルダの下に :ref:`FiveCC<FiveCC>` で命名したテキストファイルとビットマップファイルを置きます。
 
 例えば、cfn20というフォントを作りたいときは、次のようなファイルを用意し、指定の場所に置きます。
 
  * cfn20.txt
  * cfn20_0.png
  * cfn20_1.png
  * cfn20_2.png
  * cfn20_3.png
 
 この状態でcfn20.txtを選択し、[右クリック]→[Export]を選ぶと、Resourcesフォルダの下に次のようなファイルが生成されます。

  * cfn20.font
  * cfn20.tex

 以上の手順で、cfn20というフォントがアプリケーション内で使用可能になります。

 .. image:: images/FontResource.png 
 
アセットバンドルデータとして作成
-----------------------------------

 Assetsのフォルダの下に、Fontsというフォルダを作ります。
 
 そのフォルダの下に :ref:`FiveCC<FiveCC>` で命名したテキストファイルとテクスチャファイルを置きます。

 例えば、fn16というフォントを作りたいときは、次のようなファイルを用意し、指定の場所に置きます。
 
  * fn16.txt
  * fn16_0.png
  * fn16_1.png
  * fn16_2.png
  * fn16_3.png

 また、複数のフォントを使いたいときは、同じ手順で複数ファイルを配置しておきます。
 
 準備ができましたら、[KsTools]→[Export Fonts]を実行してください。

 以下のアセットバンドルが生成されます。

   assetbundles/Windows/000_001_00000.unity3d
 
 このアセットバンドルの中に必要なフォントデータがすべて格納されています。

 .. image:: images/Fonts.png 

BMFontによるフォントデータ作成方法
------------------------------------

 BMFont(Bitmap Font Generator) を使ってビットマップフォントを作る方法を紹介します。

ビットマップフォントの作成
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 ■Font Settings

  まずは使用するフォントを選択します。メニューから[Options]→[Font Settings]を選択します。
  
  次にフォントの種類とフォントサイズを選びます。
  
  [Match char height]にはチェックを入れておいてください。
  
  [Hieght%]には100を入れておきます。
 
  .. image:: images/FontSetting.png 
 
 ■Export Options
 
  次にメニューから[Options]→[Export Options]を選択してExportの設定を行います。
  
  まずは以下の赤枠の部分の値を変更します。

  .. image:: images/FontExportOption.png 

  
 ■含める文字を選択
 
  次にビットマップフォントに含める文字を指定します。

 ■確認
  
  設定された項目にそって正しく出力されるか確認します。メニューから[Options]→[Visualize]を選び、プレビューします。
  
  テクスチャが４枚以内に収まっているかを確認します。
  
  もし1枚に全て収まっているならビットマップサイズが4枚になるようにテクスチャサイズを調整してみるとデータサイズを軽くできる可能性があります。
  
 ■出力
 
  これで設定は完了です。
  
  メニューから[Options]→[Save bitmap font as...]を選択してビットマップを出力します。

  ファイルは、 :ref:`FiveCC<FiveCC>` を使って名前を付けてください。
  
  最後に、出力されたfntファイルをtxtファイルにリネームするとビットマップフォントに必要なファイルがすべて揃います。

